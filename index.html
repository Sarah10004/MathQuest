<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>MathQuest - 학생 온보딩</title>
  <style>
    :root{
      /* 톤앤매너: 밝은 그레이, 파랑/민트/핑크 포인트 */
      --bg:#f6f7f9;
      --card:#ffffff;
      --ink:#1f2937; /* slate-800 */
      --muted:#6b7280; /* slate-500 */
      --primary:#4f46e5; /* 인디고 블루 - 더 따뜻하고 친근한 느낌 */
      --mint:#10b981; /* 에메랄드 그린 - 자연스럽고 밝은 느낌 */
      --pink:#ec4899; /* 핑크 - 부드럽고 귀여운 느낌 */
      --ring: rgba(79, 70, 229, .25);
      --chip:#eef2ff; /* soft indigo */
      --chip-ink:#374151;
      --chip-active:#dbeafe; /* light blue */
      --shadow:0 8px 24px rgba(31,41,55,.08);
      --radius:18px;
      --radius-sm:12px;
      --radius-lg:26px;
    }
    *{box-sizing:border-box}
    body{
      margin:0; background:var(--bg); color:var(--ink);
      font-family: ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Apple SD Gothic Neo", "Noto Sans KR", "Malgun Gothic", sans-serif;
      letter-spacing: -.1px;
    }
    .layout{display:grid; grid-template-columns: 72px 1fr; min-height:100dvh;}
    /* 미니 사이드바 (톤만 맞춤) */
    .sidebar{padding:18px 12px; border-right:1px solid #e5e7eb; background:#fff}
    .logo{height:36px; width:36px; border-radius:12px; background:linear-gradient(135deg,var(--primary),var(--mint)); box-shadow:0 6px 16px rgba(54,99,255,.25)}

    main{position:relative; padding:32px 24px;}
    .page-title{font-size:18px; font-weight:700; margin:6px 0 18px;}

    /* LLM 카드 */
    .llm-card{max-width:720px; background:var(--card); border-radius:var(--radius-lg); box-shadow:var(--shadow);
      padding:22px 22px 18px; position:relative; overflow:hidden}
    .llm-header{display:flex; align-items:center; gap:12px; margin-bottom:8px}
    .ai-badge{display:inline-flex; align-items:center; gap:8px; font-size:12px; color:#0f172a; padding:6px 10px; border-radius:999px; background:linear-gradient(135deg,#f0f4ff,#f0fdf4,#f0f4ff)}
    .ai-dot{width:10px; height:10px; border-radius:50%; background:var(--primary); box-shadow:0 0 0 6px var(--ring)}

    .q-title{font-size:16px; font-weight:700; line-height:1.3; margin:6px 0 10px}
    .q-help{font-size:12px; color:var(--muted); margin-bottom:8px}

    .chip-row{display:flex; flex-wrap:wrap; gap:8px; margin:10px 0 4px}
    .chip{appearance:none; border:none; background:var(--chip); color:var(--chip-ink); padding:7px 12px;
      border-radius:999px; font-size:12px; cursor:pointer; transition:.2s ease; display:inline-flex; align-items:center; gap:6px}
    .chip:hover{transform:translateY(-1px); box-shadow:0 8px 14px rgba(2,6,23,.06)}
    .chip.active{background:var(--chip-active); outline:1px solid #c7d2fe}
    .chip .x{display:inline-block; width:14px; height:14px; border-radius:999px; background:#fff; box-shadow:0 1px 0 rgba(0,0,0,.05); color:#64748b; font-size:11px; line-height:14px; text-align:center}

    .input-wrap{display:flex; gap:8px; margin-top:10px}
    .text-in{flex:1; padding:10px 12px; border-radius:12px; border:1px solid #e5e7eb; background:#fafafa; font-size:13px}
    .text-in:focus{outline:2px solid var(--ring); border-color:#dbeafe}
    .add-btn{padding:10px 14px; border-radius:12px; background:var(--primary); color:#fff; border:none; font-size:12px}

    .footer{display:flex; align-items:center; justify-content:space-between; margin-top:16px}
    .progress{height:6px; background:#eef2f7; border-radius:6px; overflow:hidden; flex:1; margin-right:12px}
    .bar{height:100%; background:linear-gradient(90deg,var(--primary),var(--mint)); width:0%}
    .nav-btn{border:none; padding:10px 14px; border-radius:12px; background:#0f172a; color:#fff; font-size:12px}
    .nav-btn[disabled]{opacity:.4}

    .ghost{position:absolute; right:-20px; top:-20px; width:200px; height:200px; background:radial-gradient(circle at 30% 30%, #e0e7ff 0, rgba(224,231,255,.8) 25%, rgba(224,231,255,.4) 50%, rgba(224,231,255,.1) 75%, transparent 90%), radial-gradient(circle at 70% 70%, #fce7f3 0, rgba(252,231,243,.7) 30%, rgba(252,231,243,.3) 60%, rgba(252,231,243,.1) 85%, transparent 95%); filter:blur(8px);}

    /* 요약 섹션 */
    .summary{background:linear-gradient(180deg,#ffffff, #f8fbff); border:1px solid #eef2ff; padding:18px; border-radius:var(--radius);}
    .summary h4{font-size:14px; margin:0 0 8px}
    .summary p{font-size:12px; color:var(--muted); margin:0}

    /* 플로팅 도우미 */
    .fab{position:fixed; right:22px; bottom:22px; width:56px; height:56px; border-radius:50%; background:radial-gradient(circle at 30% 30%, #e0e7ff, #f0fdf4, #e0e7ff); border: 6px solid #e0e7ff; box-shadow:0 12px 28px rgba(79,70,229,.25); display:grid; place-items:center}
    .fab-dot{width:14px; height:14px; border-radius:50%; background:conic-gradient(from 0deg, var(--primary), var(--mint), var(--pink), var(--primary))}

    @media (max-width: 860px){
      .layout{grid-template-columns: 1fr}
      .sidebar{display:none}
      main{padding:18px}
      .llm-card{border-radius:20px}
    }
  </style>
</head>
<body>
  <div class="layout">
    <aside class="sidebar">
      <div class="logo" title="MathQuest"></div>
    </aside>

    <main>
      <div style="max-width:720px; margin:0 auto 18px; display:flex; align-items:end; justify-content:space-between; gap:12px;">
        <div>
          <div class="ai-badge"><span class="ai-dot"></span> AI 튜터와 빠른 설정</div>
          <h1 class="page-title">나에게 맞는 수학 학습을 시작해볼까요?</h1>
          <p class="q-help">간단한 질문에 답하면, 난이도·콘텐츠·보상이 자동으로 맞춰져요.</p>
        </div>
      </div>

      <section class="llm-card" id="card">
        <div class="ghost" aria-hidden="true"></div>
        <div class="llm-header">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M12 3l7 4v10l-7 4-7-4V7l7-4z" fill="#3663ff" opacity=".15"/><path d="M12 7l5 3v6l-5 3-5-3V10l5-3z" stroke="#3663ff"/></svg>
          <strong style="font-size:13px">AI 튜터</strong>
          <span class="q-help" id="type"></span>
        </div>
        <h3 class="q-title" id="q">로딩 중…</h3>
        <div class="q-help" id="hint"></div>
        <div class="chip-row" id="options"></div>
        <div class="input-wrap">
          <input class="text-in" id="free" type="text" placeholder="직접 입력 후 Enter…" />
          <button class="add-btn" id="add">추가</button>
        </div>
        <div class="footer">
          <div class="progress" aria-label="진행률"><div class="bar" id="bar"></div></div>
          <div style="display:flex; gap:8px">
            <button class="nav-btn" id="prev">이전</button>
            <button class="nav-btn" id="next">다음</button>
          </div>
        </div>
      </section>

      <div id="summary" style="max-width:720px; margin:14px auto 0; display:none">
        <div class="summary">
          <h4>맞춤 학습 준비 완료!</h4>
          <p id="sumtext">답변 요약을 표시합니다.</p>
        </div>
        <div style="display:flex; gap:10px; margin-top:12px">
          <button class="nav-btn" onclick="restart()">다시 설정</button>
          <button class="nav-btn" style="background:linear-gradient(90deg,var(--primary),var(--mint))" onclick="finish()">학습 시작하기</button>
        </div>
      </div>
    </main>
  </div>

  <button class="fab" title="AI 도움말"><div class="fab-dot"></div></button>

<script>
  // 질문 세트 (학생용)
  const QUESTIONS = [
    {
      id: 'grade',
      q: '너의 학년을 알려줄래?',
      hint: '예: 초1, 초4, 초6, 중1, 중2',
      type: '학년 파악',
      options: ['초1', '초2', '초3', '초4', '초5', '초6', '중1', '중2', '중3']
    },
    {
      id: 'strength',
      q: '수학에서 어떤 부분이 가장 자신 있어?',
      hint: '여러 개 골라도 돼!',
      type: '강점 파악',
      options: ['덧셈', '곱셈', '분수', '도형', '방정식', '비와 비율']
    },
    {
      id: 'weak',
      q: '어떤 부분이 가장 어려워?',
      hint: '우리가 도와줄게!',
      type: '약점 파악',
      options: ['분수 나눗셈', '긴 서술형', '도형의 넓이', '소수/분수 변환', '문제 이해']
    },
    {
      id: 'style',
      q: '공부 방식을 골라줘.',
      hint: '취향에 맞게 학습을 추천해 줄게!',
      type: '학습 스타일',
      options: ['짧고 빠르게', '자세한 설명', '게임처럼', '혼자 천천히', '예제 먼저']
    },
    {
      id: 'goal',
      q: '이번 학기 목표는 뭐야?',
      hint: '가장 중요한 목표를 골라봐!',
      type: '학습 목표',
      options: ['시험 점수 올리기', '수업 따라가기', '심화 도전', '기초 다지기']
    },
    {
      id: 'reward',
      q: '보상을 받는다면 어떤 게 좋아?',
      hint: '학습 몰입을 높여줄 요소야!',
      type: '리워드 선호',
      options: ['포인트', '아이템', '펫 키우기', '배지']
    }
  ];

  // 상태
  let step = 0;
  const answers = new Map();

  const elQ = document.getElementById('q');
  const elHint = document.getElementById('hint');
  const elType = document.getElementById('type');
  const elOptions = document.getElementById('options');
  const elBar = document.getElementById('bar');
  const elPrev = document.getElementById('prev');
  const elNext = document.getElementById('next');
  const elFree = document.getElementById('free');
  const elAdd = document.getElementById('add');

  function render(){
    if(step >= QUESTIONS.length){
      showSummary();
      return;
    }
    const {q, hint, type, options, id} = QUESTIONS[step];
    elQ.textContent = q;
    elHint.textContent = hint;
    elType.textContent = type;
    elOptions.innerHTML = '';

    const selected = new Set(answers.get(id) || []);

    options.forEach(opt => {
      const b = document.createElement('button');
      b.className = 'chip' + (selected.has(opt) ? ' active' : '');
      b.innerHTML = `<span>${opt}</span>` + (selected.has(opt) ? ` <span class="x" aria-label="삭제">×</span>` : '');
      b.addEventListener('click', () => toggle(id, opt));
      elOptions.appendChild(b);
    });

    elFree.value='';
    elBar.style.width = `${Math.round((step)/QUESTIONS.length*100)}%`;
    elPrev.disabled = step===0;
    elNext.textContent = step===QUESTIONS.length-1 ? '완료' : '다음';
    elFree.placeholder = '직접 입력 후 Enter…';
    elFree.focus();
  }

  function toggle(id, value){
    const arr = answers.get(id) || [];
    const i = arr.indexOf(value);
    if(i>-1) arr.splice(i,1); else arr.push(value);
    answers.set(id, arr);
    render();
  }

  function addFree(){
    const v = elFree.value.trim();
    if(!v) return;
    const id = QUESTIONS[step].id;
    const arr = answers.get(id) || [];
    if(!arr.includes(v)) arr.push(v);
    answers.set(id, arr);
    elFree.value='';
    render();
  }

  function next(){
    if(step < QUESTIONS.length-1){
      step++;
      render();
    } else {
      step++;
      render();
    }
  }

  function prev(){ step = Math.max(0, step-1); render(); }

  function showSummary(){
    document.getElementById('card').style.display='none';
    const sum = QUESTIONS.map(q => `• <strong>${q.q}</strong> → <em>${(answers.get(q.id)||[]).join(', ')||'-'}</em>`).join('<br/>');
    document.getElementById('sumtext').innerHTML = sum;
    document.getElementById('summary').style.display='block';
    elBar.style.width = '100%';
    // 저장 (데모: 로컬)
    localStorage.setItem('onboarding_answers', JSON.stringify(Object.fromEntries(answers)));
  }

  function restart(){
    step=0; answers.clear();
    document.getElementById('summary').style.display='none';
    document.getElementById('card').style.display='block';
    render();
  }

  function finish(){
  // 온보딩 완료 후 학생용 메인 대시보드 v2로 이동
  window.location.href = 'student-dashboard-v2.html';
}

  elAdd.addEventListener('click', addFree);
  elFree.addEventListener('keydown', e => { if(e.key==='Enter'){ e.preventDefault(); addFree(); }});
  elPrev.addEventListener('click', prev);
  elNext.addEventListener('click', next);

  // 초기 렌더
  render();
</script>
</body>
</html> 